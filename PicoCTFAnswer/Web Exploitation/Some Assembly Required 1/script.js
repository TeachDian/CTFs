let exports;

(async () => {
  try {
    const response = await fetch('./JIFxzHyW8W');
    const buffer = await response.arrayBuffer();
    const { instance } = await WebAssembly.instantiate(buffer);
    exports = instance.exports;
  } catch (error) {
    console.error('Error loading WebAssembly module:', error);
  }
})();

function onButtonPress() {
  const inputElement = document.getElementById('input');
  const inputValue = inputElement.value;

  for (let i = 0; i < inputValue.length; i++) {
    exports.copy_char(inputValue.charCodeAt(i), i);
  }

  exports.copy_char(0x0, inputValue.length);

  const resultElement = document.getElementById('result');
  resultElement.innerHTML = exports.check_flag() === 0x1 ? 'Correct!' : 'Incorrect!';
}

/* Thanks to ChatGPT <3 */